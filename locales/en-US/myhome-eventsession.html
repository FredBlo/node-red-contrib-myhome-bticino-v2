<script type="text/x-red" data-help-name="myhome-eventsession">
  <p>The monitoring node used to trigger flows based on any command read on the MyHome system BUS.</p>
    <ul>
      <li><strong>Name</strong> (mandatory) is the name of the node</li>
      <li><strong>Gateway</strong> is the gateway to be configured in order to connect to MyHome system</li>
      <li><strong>Command family filters</strong> allows you to define which kind of MyHome commands have to trigger new flows.</li>
    </ul>

  <h3>Input</h3>
    <p>(none)</p>

  <h3>Output</h3>
    <p>The <strong>primary output</strong> is a <em>[string]</em> containing the OpenWebNet command read on the MyHome BUS.</p>
    <p>The <strong>secondary output</strong> contains detailled analyzed information as if the node was working in 'universal mode' (i.e. processing all received BUS frames).</p>
    <p>'Universal mode' is currently only supported for a few types :
      <ul>
        <li><strong>Lights</strong> : payload object details :</li>
          <ul>
            <li> <code>payload.command_received</code> <em>[string]</em> contains the command which was read in OpenWebNet protocol (ex: <em>'*1*5*25##'</em> means load 2.5 was turned on at 50% brightness)</li>
            <li> <code>payload.buslevel</code> <em>[string]</em> : bus level ('private_riser', '01', '02', ... '15')</li>
            <li> <code>payload.state</code> <em>[string]</em> value is 'ON' or 'OFF'</li>
            <li> <code>payload.brightness</code> <em>[integer]</em> represents current brightness percentage of the load. When non-dimmmable is 0 or 100. </li>
            <li> <code>payload.lightid</code> <em>[string]</em> : light ID</li>
            <li> <code>payload.isgroup</code> <em>[boolean]</em> : group call (true) or single light point call (false)</li>
          </ul>
        <li><strong>Shutters</strong> : payload object details :</li>
        TODO
        TODO
          <ul>
            <li> <code>payload.xxxx</code> <em>[string]</em> : xxxx</li>
            <li> <code>payload.xxxx</code> <em>[string]</em> : xxxx</li>
            <li> <code>payload.xxxx</code> <em>[string]</em> : xxxx</li>
          </ul>
      </ul>
    <p>
      <strong>Both outputs</strong> also include an additional object <code>msg.mh_nodeConfigInfo</code> which includes data from node configuration.
      This can be used in flows to redirect messages based on how (i.e. which node) they come from without having to include 'change nodes' at every stage.
    </p>
    <p>
      The <code>msg.mh_nodeConfigInfo</code> contains node configuration values :
    </p>
    <ul>
      <li> <code>mh_nodeConfigInfo.name</code> <em>[string]</em> : name</li>
      <li> <code>mh_nodeConfigInfo.ownFamilyName</code> <em>[string]</em> : the OpenWebNet famaily name (such as 'OWN_LIGHTS', 'OWN_SCENARIO',...)</li>
      <li> <code>mh_nodeConfigInfo.gateway</code> <em>[object]</em> : linked gateway info : name (<code>.name</code>), Host/IP (<code>.host</code>) and port (<code>.port</code>)</li>
    </ul>
</script>
